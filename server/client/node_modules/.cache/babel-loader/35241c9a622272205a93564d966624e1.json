{"ast":null,"code":"import _toConsumableArray from \"/Users/karishma/Desktop/photo/Photo-Flick/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/karishma/Desktop/photo/Photo-Flick/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/karishma/Desktop/photo/Photo-Flick/server/client/src/components/Home/Home.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Container, Grow, Grid, Paper, AppBar, Button, TextField } from '@material-ui/core';\nimport Posts from '../Posts/Posts';\nimport Form from '../Form/Form';\nimport { useDispatch } from 'react-redux';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\nimport useStyles from './styles';\nimport Pagination from '../Pagination';\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nvar Home = function Home() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentId = _useState2[0],\n      setCurrentId = _useState2[1];\n\n  var dispatch = useDispatch();\n  var query = useQuery();\n  var history = useNavigate();\n  var page = query.get('page') || 1;\n  var searchQuery = query.get('searchQuery');\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tags = _useState6[0],\n      setTags = _useState6[1];\n\n  var classes = useStyles();\n\n  var handleKeyPress = function handleKeyPress(e) {\n    if (e.keyCode === 13) {\n      //enter key\n      searchPost();\n    }\n  };\n\n  var handleAdd = function handleAdd(tag) {\n    return setTags([].concat(_toConsumableArray(tags), [tag]));\n  };\n\n  var handleDelete = function handleDelete(tagToDel) {\n    return setTags(tags.filter(function (tag) {\n      return tag !== tagToDel;\n    }));\n  };\n\n  var searchPost = function searchPost() {\n    if (search.trim() || tags) {\n      dispatch(getPostsBySearch({\n        search: search,\n        tags: tags.join(',')\n      }));\n      history(\"/posts/search?searchQuery=\".concat(search || 'none', \"&tags=\").concat(tags.join(',')));\n    } else {\n      history('/');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Grow, {\n    in: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"xl\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    justify: \"space-between\",\n    alignItems: \"stretch\",\n    spacing: 3,\n    className: classes.gridContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 9,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Posts, {\n    setCurrentId: setCurrentId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    className: classes.appBarSearch,\n    position: \"static\",\n    color: \"inherit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      textAlign: 'center',\n      fontFamily: \"Playfair Display\",\n      margin: '0'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 29\n    }\n  }, \"SEARCH\"), /*#__PURE__*/React.createElement(ChipInput, {\n    style: {\n      margin: '10px 0'\n    },\n    value: tags,\n    onAdd: handleAdd,\n    onDelete: handleDelete,\n    label: \"Search Tags\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: searchPost,\n    className: classes.button,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Search\")), !searchQuery && (!tags || !tags.length) && /*#__PURE__*/React.createElement(Paper, {\n    className: classes.pagination,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Pagination, {\n    page: page,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 33\n    }\n  }))))));\n};\n\nexport default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Grow","Grid","Paper","AppBar","Button","TextField","Posts","Form","useDispatch","useLocation","useNavigate","ChipInput","getPosts","getPostsBySearch","useStyles","Pagination","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","setSearch","tags","setTags","classes","handleKeyPress","e","keyCode","searchPost","handleAdd","tag","handleDelete","tagToDel","filter","trim","join","gridContainer","appBarSearch","textAlign","fontFamily","margin","button","length","pagination"],"sources":["/Users/karishma/Desktop/photo/Photo-Flick/server/client/src/components/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Grow, Grid, Paper, AppBar, Button, TextField } from '@material-ui/core'\r\nimport Posts from '../Posts/Posts'\r\nimport Form from '../Form/Form'\r\nimport { useDispatch } from 'react-redux';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport ChipInput from 'material-ui-chip-input'\r\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\r\nimport useStyles from './styles'\r\nimport Pagination from '../Pagination';\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nconst Home = () => {\r\n    const [currentId, setCurrentId] = useState(null);\r\n    const dispatch = useDispatch();\r\n    const query = useQuery();\r\n    const history = useNavigate();\r\n    const page = query.get('page') || 1;\r\n    const searchQuery = query.get('searchQuery');\r\n    const [search, setSearch] = useState('');\r\n    const [tags, setTags] = useState([]);\r\n    const classes = useStyles();\r\n\r\n    const handleKeyPress = (e) => {\r\n        if (e.keyCode === 13) {   //enter key\r\n            searchPost();\r\n        }\r\n    }\r\n    const handleAdd = (tag) => setTags([...tags, tag]);\r\n\r\n    const handleDelete = (tagToDel) => setTags(tags.filter((tag) => tag !== tagToDel));\r\n\r\n    const searchPost = () => {\r\n\r\n        if (search.trim() || tags) {\r\n            dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\r\n            history((`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`));\r\n        }\r\n        else {\r\n            history('/');\r\n        }\r\n    }\r\n    return (\r\n        <Grow in>\r\n            <Container maxWidth=\"xl\" >\r\n                <Grid container justify=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\r\n                    <Grid item xs={12} sm={6} md={9}>\r\n                        <Posts setCurrentId={setCurrentId} />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6} md={3}>\r\n                        <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\" >\r\n                            <h1 style={{textAlign:'center',fontFamily:\"Playfair Display\",margin:'0'}}>SEARCH</h1>\r\n                            <ChipInput\r\n                                style={{ margin: '10px 0' }}\r\n                                value={tags}\r\n                                onAdd={handleAdd}\r\n                                onDelete={handleDelete}\r\n                                label=\"Search Tags\"\r\n                                \r\n                            />\r\n                            <Button onClick={searchPost} className={classes.button} variant=\"contained\" color=\"primary\">Search</Button>\r\n\r\n                        </AppBar>\r\n                        \r\n                        {(!searchQuery && (!tags || !tags.length)) && (\r\n                            <Paper className={classes.pagination} >\r\n                                <Pagination page={page} />\r\n                            </Paper>\r\n                        )}\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </Grow>\r\n\r\n    )\r\n}\r\n\r\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module"}